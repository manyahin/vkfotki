/*! Magnific Popup - v0.8.3 - 2013-05-09
* http://dimsemenov.com/plugins/magnific-popup/
* Copyright (c) 2013 Dmitry Semenov; */
(function(e){var t,n,i,a,o,r,s,l="Close",c="BeforeAppend",d="MarkupParse",u="Open",p="Change",f="mfp",m="."+f,g="mfp-ready",v="mfp-removing",h="mfp-prevent-close",C=function(){},y=e(window),w=function(e,n){t.ev.on(f+e+m,n)},b=function(t,n,i,a){var o=document.createElement("div");return o.className="mfp-"+t,i&&(o.innerHTML=i),a?n&&n.appendChild(o):(o=e(o),n&&o.appendTo(n)),o},x=function(n,i){t.ev.triggerHandler(f+n,i),t.st.callbacks&&(n=n.charAt(0).toLowerCase()+n.slice(1),t.st.callbacks[n]&&t.st.callbacks[n].apply(t,e.isArray(i)?i:[i]))},I=function(){(t.st.focus?t.content.find(t.st.focus).eq(0):t.wrap).focus()},k=function(n){return n===s&&t.currTemplate.closeBtn||(t.currTemplate.closeBtn=e(t.st.closeMarkup.replace("%title%",t.st.tClose)),s=n),t.currTemplate.closeBtn};C.prototype={constructor:C,init:function(){var n=navigator.appVersion;t.isIE7=-1!==n.indexOf("MSIE 7."),t.isAndroid=/android/gi.test(n),t.isIOS=/iphone|ipad|ipod/gi.test(n),t.probablyMobile=t.isAndroid||t.isIOS||/(Opera Mini)|Kindle|webOS|BlackBerry|(Opera Mobi)|(Windows Phone)|IEMobile/i.test(navigator.userAgent),i=e(document.body),a=e(document),t.popupsCache={}},open:function(n){if(!t.isOpen){var o;if(t.types=[],r="",t.ev=n.el||a,n.isObj)t.index=n.index||0;else{t.index=0;var s,l=n.items;for(o=0;l.length>o;o++)if(s=l[o],s.parsed&&(s=s.el[0]),s===n.el[0]){t.index=o;break}}n.key?(t.popupsCache[n.key]||(t.popupsCache[n.key]={}),t.currTemplate=t.popupsCache[n.key]):t.currTemplate={},t.st=e.extend(!0,{},e.magnificPopup.defaults,n),t.fixedContentPos="auto"===t.st.fixedContentPos?!t.probablyMobile:t.st.fixedContentPos,t.items=n.items.length?n.items:[n.items],t.bgOverlay||(t.bgOverlay=b("bg").on("click"+m,function(){t.close()}),t.wrap=b("wrap").attr("tabindex",-1).on("click"+m,function(n){var i=n.target;e(i).hasClass(h)||(t.st.closeOnContentClick?t.close():(!t.content||e(i).hasClass("mfp-close")||t.preloader&&n.target===t.preloader[0]||i!==t.content[0]&&!e.contains(t.content[0],i))&&t.close())}),t.container=b("container",t.wrap)),t.contentContainer=b("content"),t.st.preloader&&(t.preloader=b("preloader",t.container,t.st.tLoading));var c=e.magnificPopup.modules;for(o=0;c.length>o;o++){var p=c[o];p=p.charAt(0).toUpperCase()+p.slice(1),t["init"+p].call(t)}x("BeforeOpen"),t.st.closeBtnInside?(w(d,function(e,t,n,i){n.close_replaceWith=k(i.type)}),r+=" mfp-close-btn-in"):t.wrap.append(k()),t.st.alignTop&&(r+=" mfp-align-top"),t.fixedContentPos?t.wrap.css({overflow:t.st.overflowY,overflowX:"hidden",overflowY:t.st.overflowY}):t.wrap.css({top:y.scrollTop(),position:"absolute"}),(t.st.fixedBgPos===!1||"auto"===t.st.fixedBgPos&&!t.fixedContentPos)&&t.bgOverlay.css({height:a.height(),position:"absolute"}),a.on("keyup"+m,function(e){27===e.keyCode&&t.close()}),y.on("resize"+m,function(){t.updateSize()}),t.st.closeOnContentClick||(r+=" mfp-auto-cursor"),r&&t.wrap.addClass(r);var f=t.wH=y.height(),v={};if(t.fixedContentPos&&"scroll"!==t.st.overflowY){var C=t._getScrollbarSize();C&&(v.paddingRight=C)}t.fixedContentPos&&(t.isIE7?e("body, html").css("overflow","hidden"):v.overflow="hidden");var P=t.st.mainClass;t.isIE7&&(P+=" mfp-ie7"),P&&t._addClassToMFP(P),t.updateItemHTML(),x("BuildControls"),i.css(v),t.bgOverlay.add(t.wrap).prependTo(document.body),t._lastFocusedEl=document.activeElement,setTimeout(function(){t.content?(t._addClassToMFP(g),I()):t.bgOverlay.addClass(g),a.on("focusin"+m,function(n){return n.target===t.wrap[0]||e.contains(t.wrap[0],n.target)?void 0:(I(),!1)})},16),t.isOpen=!0,t.updateSize(f),x(u)}},close:function(){t.isOpen&&(t.isOpen=!1,t.st.removalDelay?(t._addClassToMFP(v),setTimeout(function(){t._close()},t.st.removalDelay)):t._close())},_close:function(){x(l);var n=v+" "+g+" ";if(t.bgOverlay.detach(),t.wrap.detach(),t.container.empty(),t.st.mainClass&&(n+=t.st.mainClass+" "),t._removeClassFromMFP(n),t.fixedContentPos){var o={paddingRight:0};t.isIE7?e("body, html").css("overflow","auto"):o.overflow="visible",i.css(o)}a.off("keyup"+m+" focusin"+m),t.ev.off(m),t.wrap.attr("class","mfp-wrap").removeAttr("style"),t.bgOverlay.attr("class","mfp-bg"),t.container.attr("class","mfp-container"),t.st.closeBtnInside&&t.currTemplate[t.currItem.type]!==!0||t.currTemplate.closeBtn&&t.currTemplate.closeBtn.detach(),t._lastFocusedEl&&e(t._lastFocusedEl).focus(),t.content=null,t.currTemplate=null,t.prevHeight=0},updateSize:function(e){if(t.isIOS){var n=document.documentElement.clientWidth/window.innerWidth,i=window.innerHeight*n;t.wrap.css("height",i),t.wH=i}else t.wH=e||y.height();x("Resize")},updateItemHTML:function(){var n=t.items[t.index];t.contentContainer.detach(),t.content&&t.content.detach(),n.parsed||(n=t.parseEl(t.index)),t.currItem=n;var i=n.type;if(!t.currTemplate[i]){var a=t.st[i]?t.st[i].markup:!1;x("FirstMarkupParse",a),t.currTemplate[i]=a?e(a):!0}o&&o!==n.type&&t.container.removeClass("mfp-"+o+"-holder");var r=t["get"+i.charAt(0).toUpperCase()+i.slice(1)](n,t.currTemplate[i]);t.appendContent(r,i),n.preloaded=!0,x(p,n),o=n.type,t.container.prepend(t.contentContainer)},appendContent:function(e,n){t.content=e,e?t.st.closeBtnInside&&t.currTemplate[n]===!0?t.content.find(".mfp-close").length||t.content.append(k()):t.content=e:t.content="",x(c),t.container.addClass("mfp-"+n+"-holder"),t.contentContainer.append(t.content)},parseEl:function(n){var i=t.items[n],a=i.type;if(i=i.tagName?{el:e(i)}:{data:i,src:i.src},i.el){for(var o=t.types,r=0;o.length>r;r++)if(i.el.hasClass("mfp-"+o[r])){a=o[r];break}i.src=i.el.attr("data-mfp-src"),i.src||(i.src=i.el.attr("href"))}return i.type=a||t.st.type,i.index=n,i.parsed=!0,t.items[n]=i,x("ElementParse",i),t.items[n]},addGroup:function(n,i){var a=function(a){var o=void 0!==i.midClick?i.midClick:e.magnificPopup.defaults.midClick;if(o||2!==a.which){var r=void 0!==i.disableOn?i.disableOn:e.magnificPopup.defaults.disableOn;if(r)if(e.isFunction(r)){if(!r.call(t))return!0}else if(r>e(window).width())return!0;a.preventDefault(),i.el=e(this),i.mainEl=n,i.delegate&&(i.items=n.find(i.delegate)),t.open(i)}};i||(i={});var o="click.magnificPopup";i.items?(i.isObj=!0,n.off(o).on(o,a)):(i.isObj=!1,i.delegate?n.off(o).on(o,i.delegate,a):(i.items=n,n.off(o).on(o,a)))},updateStatus:function(e,i){if(t.preloader){n!==e&&t.container.removeClass("mfp-s-"+n),i||"loading"!==e||(i=t.st.tLoading);var a={status:e,text:i};x("UpdateStatus",a),e=a.status,i=a.text,t.preloader.html(i),t.preloader.find("a").click(function(e){e.stopImmediatePropagation()}),t.container.addClass("mfp-s-"+e),n=e}},_addClassToMFP:function(e){t.bgOverlay.addClass(e),t.wrap.addClass(e)},_removeClassFromMFP:function(e){this.bgOverlay.removeClass(e),t.wrap.removeClass(e)},_hasScrollBar:function(e){return document.body.clientHeight>(e||y.height())?!0:!1},_parseMarkup:function(t,n,i){var a;i.data&&(n=e.extend(i.data,n)),x(d,[t,n,i]),e.each(n,function(e,n){if(void 0===n||n===!1)return!0;if(a=e.split("_"),a.length>1){var i=t.find(m+"-"+a[0]);if(i.length>0){var o=a[1];"replaceWith"===o?i[0]!==n[0]&&i.replaceWith(n):"img"===o?i.is("img")?i.attr("src",n):i.replaceWith('<img src="'+n+'" class="'+i.attr("class")+'" />'):i.attr(a[1],n)}}else t.find(m+"-"+e).html(n)})},_getScrollbarSize:function(){if(void 0===t.scrollbarSize){var e=document.createElement("div");e.id="mfp-sbm",e.style.cssText="width: 99px; height: 99px; overflow: scroll; position: absolute; top: -9999px;",document.body.appendChild(e),t.scrollbarSize=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return t.scrollbarSize}},e.magnificPopup={instance:null,proto:C.prototype,modules:[],open:function(n,i){return e.magnificPopup.instance||(t=new C,t.init(),e.magnificPopup.instance=t),n||(n={}),n.isObj=!0,n.index=void 0===i?0:i,this.instance.open(n)},close:function(){return e.magnificPopup.instance.close()},registerModule:function(t,n){n.options&&(e.magnificPopup.defaults[t]=n.options),e.extend(this.proto,n.proto),this.modules.push(t)},defaults:{disableOn:0,key:null,midClick:!1,mainClass:"",preloader:!0,focus:"",closeOnContentClick:!1,closeBtnInside:!0,alignTop:!1,removalDelay:0,fixedContentPos:"auto",fixedBgPos:"auto",overflowY:"auto",closeMarkup:'<button title="%title%" type="button" class="mfp-close">&times;</button>',tClose:"Close (Esc)",tLoading:"Loading..."}},e.fn.magnificPopup=function(n){return e.magnificPopup.instance||(t=new C,t.init(),e.magnificPopup.instance=t),t.addGroup(e(this),n),e(this)};var P,S="inline";e.magnificPopup.registerModule(S,{options:{hiddenClass:f+"-hide",markup:"",tNotFound:"Content not found"},proto:{initInline:function(){t.types.push(S),P=!1,w(l+"."+S,function(){var e=t.currItem;if(e.type===S){if(P)for(var n=0;t.items.length>n;n++)e=t.items[n],e&&e.inlinePlaceholder&&e.inlinePlaceholder.after(e.inlineElement.addClass(t.st.inline.hiddenClass)).detach();e.inlinePlaceholder=e.inlineElement=null}})},getInline:function(n,i){if(t.updateStatus("ready"),n.src){var a=t.st.inline;return"string"!=typeof n.src&&(n.isElement=!0),n.isElement||n.inlinePlaceholder||(n.inlinePlaceholder=b(a.hiddenClass)),n.isElement?n.inlineElement=n.src:n.inlineElement||(n.inlineElement=e(n.src),n.inlineElement.length||(t.updateStatus("error",a.tNotFound),n.inlineElement=e("<div>"))),n.inlinePlaceholder&&(P=!0),n.inlineElement.after(n.inlinePlaceholder).detach().removeClass(a.hiddenClass),n.inlineElement}return t._parseMarkup(i,{},n),i}}});var E,T="ajax",M=function(){E&&i.removeClass(E)};e.magnificPopup.registerModule(T,{options:{settings:null,cursor:"mfp-ajax-cur",tError:'<a href="%url%">The content</a> could not be loaded.'},proto:{initAjax:function(){t.types.push(T),E=t.st.ajax.cursor,w(l+"."+T,function(){M(),t.req&&t.req.abort()})},getAjax:function(n){E&&i.addClass(E),t.updateStatus("loading");var a=e.extend({url:n.src,success:function(i,a,o){x("ParseAjax",o),t.appendContent(e(o.responseText),T),n.finished=!0,M(),I(),setTimeout(function(){t.wrap.addClass(g)},16),t.updateStatus("ready")},error:function(){M(),n.finished=n.loadError=!0,t.updateStatus("error",t.st.ajax.tError.replace("%url%",n.src))}},t.st.ajax.settings);return t.req=e.ajax(a),""}}});var O,_=function(n){if(n.data&&void 0!==n.data.title)return n.data.title;var i=t.st.image.titleSrc;if(i){if(e.isFunction(i))return i.call(t,n);if(n.el)return n.el.attr(i)||""}return""};e.magnificPopup.registerModule("image",{options:{markup:'<div class="mfp-figure"><div class="mfp-close"></div><div class="mfp-img"></div><div class="mfp-bottom-bar"><div class="mfp-title"></div><div class="mfp-counter"></div></div></div>',cursor:"mfp-zoom-out-cur",titleSrc:"title",verticalFit:!0,tError:'<a href="%url%">The image</a> could not be loaded.'},proto:{initImage:function(){var e=t.st.image,n=".image";t.types.push("image"),w(u+n,function(){"image"===t.currItem.type&&e.cursor&&i.addClass(e.cursor)}),w(l+n,function(){e.cursor&&i.removeClass(e.cursor),y.off("resize"+m)}),w("Resize"+n,function(){t.resizeImage()})},resizeImage:function(){var e=t.currItem;e.img&&t.st.image.verticalFit&&e.img.css("max-height",t.wH+"px")},_onImageHasSize:function(e){e.img&&(e.hasSize=!0,O&&clearInterval(O),e.isCheckingImgSize=!1,x("ImageHasSize",e),e.imgHidden&&(t.content&&t.content.removeClass("mfp-loading"),e.imgHidden=!1))},findImageSize:function(e){var n=0,i=e.img[0],a=function(o){O&&clearInterval(O),O=setInterval(function(){return i.naturalWidth>0?(t._onImageHasSize(e),void 0):(n>200&&clearInterval(O),n++,3===n?a(10):40===n?a(50):100===n&&a(500),void 0)},o)};a(1)},getImage:function(n,i){var a=0,o=function(){n&&(n.img[0].complete?(n.img.off(".mfploader"),n===t.currItem&&(t._onImageHasSize(n),t.updateStatus("ready")),n.hasSize=!0,n.loaded=!0):(a++,200>a?setTimeout(o,100):r()))},r=function(){n&&(n.img.off(".mfploader"),n===t.currItem&&(t._onImageHasSize(n),t.updateStatus("error",s.tError.replace("%url%",n.src))),n.hasSize=!0,n.loaded=!0,n.loadError=!0)},s=t.st.image,l=i.find(".mfp-img");if(l.length){var c=new Image;c.className="mfp-img",n.img=e(c).on("load.mfploader",o).on("error.mfploader",r),c.src=n.src,l.is("img")&&(n.img=n.img.clone())}return t._parseMarkup(i,{title:_(n),img_replaceWith:n.img},n),t.resizeImage(),n.hasSize?(O&&clearInterval(O),n.loadError?(i.addClass("mfp-loading"),t.updateStatus("error",s.tError.replace("%url%",n.src))):(i.removeClass("mfp-loading"),t.updateStatus("ready")),i):(t.updateStatus("loading"),n.loading=!0,n.hasSize||(n.imgHidden=!0,i.addClass("mfp-loading"),t.findImageSize(n)),i)}}});var z="iframe",F=function(e){if(t.isIE7&&t.currItem&&t.currItem.type===z){var n=t.content.find("iframe");n.length&&n.css("display",e?"block":"none")}};e.magnificPopup.registerModule(z,{options:{markup:'<div class="mfp-iframe-scaler"><div class="mfp-close"></div><iframe class="mfp-iframe" frameborder="0" allowfullscreen></iframe></div>',srcAction:"iframe_src",patterns:{youtube:{index:"youtube.com",id:"v=",src:"//www.youtube.com/embed/%id%?autoplay=1"},vimeo:{index:"vimeo.com/",id:"/",src:"//player.vimeo.com/video/%id%?autoplay=1"},gmaps:{index:"//maps.google.",src:"%id%&output=embed"}}},proto:{initIframe:function(){t.types.push(z),F(!0),w(l+"."+z,function(){F()})},getIframe:function(n,i){var a=n.src,o=t.st.iframe;e.each(o.patterns,function(){return a.indexOf(this.index)>-1?(this.id&&(a="string"==typeof this.id?a.substr(a.lastIndexOf(this.id)+this.id.length,a.length):this.id.call(this,a)),a=this.src.replace("%id%",a),!1):void 0});var r={};return o.srcAction&&(r[o.srcAction]=a),t._parseMarkup(i,r,n),t.updateStatus("ready"),i}}});var H=function(e){var n=t.items.length;return e>n-1?e-n:0>e?n+e:e},B=function(e,t,n){return e.replace("%curr%",t+1).replace("%total%",n)};e.magnificPopup.registerModule("gallery",{options:{enabled:!1,arrowMarkup:'<button title="%title%" type="button" class="mfp-arrow mfp-arrow-%dir%"></button>',preload:[0,2],navigateByImgClick:!0,arrows:!0,tPrev:"Previous (Left arrow key)",tNext:"Next (Right arrow key)",tCounter:"%curr% of %total%"},proto:{initGallery:function(){var n=t.st.gallery,i=".mfp-gallery",o=Boolean(e.fn.mfpFastClick);return t.direction=!0,n&&n.enabled?(r+=" mfp-gallery",w(u+i,function(){n.navigateByImgClick&&t.wrap.on("click"+i,".mfp-img",function(){return t.next(),!1}),a.on("keydown"+i,function(e){37===e.keyCode?t.prev():39===e.keyCode&&t.next()})}),w("UpdateStatus"+i,function(e,n){n.text&&(n.text=B(n.text,t.currItem.index,t.items.length))}),w(d+i,function(e,i,a,o){var r=t.items.length;a.counter=r?B(n.tCounter,o.index,r):""}),w("BuildControls"+i,function(){if(n.arrows&&!t.arrowLeft){var i=n.arrowMarkup,a=t.arrowLeft=e(i.replace("%title%",n.tPrev).replace("%dir%","left")).addClass(h),r=t.arrowRight=e(i.replace("%title%",n.tNext).replace("%dir%","right")).addClass(h),s=o?"mfpFastClick":"click";a[s](function(){t.prev()}),r[s](function(){t.next()}),t.isIE7&&(b("b",a[0],!1,!0),b("a",a[0],!1,!0),b("b",r[0],!1,!0),b("a",r[0],!1,!0)),t.container.append(a.add(r))}}),w(p+i,function(){t._preloadTimeout&&clearTimeout(t._preloadTimeout),t._preloadTimeout=setTimeout(function(){t.preloadNearbyImages(),t._preloadTimeout=null},16)}),w(l+i,function(){a.off(i),t.wrap.off("click"+i),o&&t.arrowLeft.add(t.arrowRight).destroyMfpFastClick(),t.arrowRight=t.arrowLeft=null}),void 0):!1},next:function(){t.direction=!0,t.index=H(t.index+1),t.updateItemHTML()},prev:function(){t.direction=!1,t.index=H(t.index-1),t.updateItemHTML()},goTo:function(e){t.direction=e>=t.index,t.index=e,t.updateItemHTML()},preloadNearbyImages:function(){var e,n=t.st.gallery.preload,i=Math.min(n[0],t.items.length),a=Math.min(n[1],t.items.length);for(e=1;(t.direction?a:i)>=e;e++)t._preloadItem(t.index+e);for(e=1;(t.direction?i:a)>=e;e++)t._preloadItem(t.index-e)},_preloadItem:function(n){if(n=H(n),!t.items[n].preloaded){var i=t.items[n];i.parsed||(i=t.parseEl(n)),x("LazyLoad",i),"image"===i.type&&(i.img=e('<img class="mfp-img" />').on("load.mfploader",function(){i.hasSize=!0}).on("error.mfploader",function(){i.hasSize=!0,i.loadError=!0}).attr("src",i.src)),i.preloaded=!0}}}});var L="retina";e.magnificPopup.registerModule(L,{options:{replaceSrc:function(e){return e.src.replace(/\.\w+$/,function(e){return"@2x"+e})},ratio:1},proto:{initRetina:function(){if(window.devicePixelRatio>1){var e=t.st.retina,n=e.ratio;n=isNaN(n)?n():n,n>1&&(w("ImageHasSize."+L,function(e,t){t.img.css({"max-width":t.img[0].naturalWidth/n,width:"100%"})}),w("ElementParse."+L,function(t,i){i.src=e.replaceSrc(i,n)}))}}}}),function(){var t=1e3,n="ontouchstart"in window,i=function(){y.off("touchmove"+o+" touchend"+o)},a="mfpFastClick",o="."+a;e.fn.mfpFastClick=function(a){return e(this).each(function(){var r,s=e(this);if(n){var l,c,d,u,p,f;s.on("touchstart"+o,function(e){u=!1,f=1,p=e.originalEvent?e.originalEvent.touches[0]:e.touches[0],c=p.clientX,d=p.clientY,y.on("touchmove"+o,function(e){p=e.originalEvent?e.originalEvent.touches:e.touches,f=p.length,p=p[0],(Math.abs(p.clientX-c)>10||Math.abs(p.clientY-d)>10)&&(u=!0,i())}).on("touchend"+o,function(e){i(),u||f>1||(r=!0,e.preventDefault(),clearTimeout(l),l=setTimeout(function(){r=!1},t),a())})})}s.on("click"+o,function(){r||a()})})},e.fn.destroyMfpFastClick=function(){e(this).off("touchstart"+o+" click"+o),n&&y.off("touchmove"+o+" touchend"+o)}}()})(window.jQuery||window.Zepto);